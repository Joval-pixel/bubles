<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BUBLES – Ações ao Vivo (com Bolhas 3D)</title>
    
    <!-- Seus estilos CSS existentes -->
    <link rel="stylesheet" href="./seu-estilo-existente.css">
    
    <!-- Estilos das Bolhas 3D -->
    <link rel="stylesheet" href="bubble_3d_styles.css">
    
    <style>
        /* Adicione ou ajuste seus estilos CSS aqui para garantir que o container das bolhas ocupe o espaço desejado */
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden; /* Para evitar barras de rolagem indesejadas */
        }
        #bubbles-container {
            width: 100vw;
            height: 100vh;
            position: relative; /* Importante para o posicionamento do canvas e labels */
            background-color: #0a0a0a; /* Cor de fundo similar ao CryptoBubbles */
        }
        /* Outros estilos para o seu layout */
    </style>
</head>
<body>
    <!-- Seu conteúdo HTML existente (cabeçalho, navegação, etc.) -->
    <header>
        <!-- ... seu código de cabeçalho ... -->
    </header>
    
    <nav>
        <!-- ... sua navegação ... -->
    </nav>

    <!-- Container onde as bolhas 3D serão renderizadas -->
    <div id="bubbles-container" class="bubbles-3d-container">
        <!-- Controles opcionais (pode ser movido para outro lugar se preferir) -->
        <div class="bubble-controls">
            <h3>Bolhas 3D</h3>
            <p>Clique e arraste para rotacionar</p>
            <p>Scroll para zoom</p>
        </div>
        
        <!-- Botões de categoria (opcional, se você tiver filtros) -->
        <div class="category-buttons">
            <button class="category-btn active" data-category="all">Todas</button>
            <button class="category-btn" data-category="acoes">Ações</button>
            <button class="category-btn" data-category="minerio">Minério</button>
            <button class="category-btn" data-category="petroleo">Petróleo</button>
            <button class="category-btn" data-category="bancos">Bancos</button>
            <button class="category-btn" data-category="varejo">Varejo</button>
        </div>
    </div>

    <!-- Seus scripts JavaScript existentes -->
    <script src="./seu-script-existente.js"></script>

    <!-- Dependências do Three.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    
    <!-- Seu script das Bolhas 3D -->
    <script src="bubble_3d_script.js"></script>

    <script>
        // Inicializar o sistema 3D das bolhas
        const bubble3D = new Bubble3D("bubbles-container", {
            autoRotate: true,
            autoRotateSpeed: 0.5,
            enableControls: true,
            enablePhysics: true,
            backgroundColor: 0x0a0a0a, // Cor de fundo da cena 3D
            onBubbleSelect: (data ) => {
                // Callback quando uma bolha é clicada
                console.log("Ação selecionada:", data);
                // Você pode adicionar aqui a lógica para exibir detalhes da ação, etc.
            }
        });

        // Exemplo de dados (substitua pelos seus dados reais)
        const stockData = [
            { symbol: 'PETR4', name: 'Petrobras', change: 2.5, value: 32.45, marketCap: 420000000000, category: 'petroleo' },
            { symbol: 'VALE3', name: 'Vale', change: -1.2, value: 65.30, marketCap: 320000000000, category: 'minerio' },
            { symbol: 'ITUB4', name: 'Itaú', change: 0.8, value: 28.90, marketCap: 250000000000, category: 'bancos' },
            { symbol: 'BBDC4', name: 'Bradesco', change: -0.5, value: 15.20, marketCap: 200000000000, category: 'bancos' },
            { symbol: 'ABEV3', name: 'Ambev', change: 1.8, value: 12.80, marketCap: 180000000000, category: 'varejo' },
            { symbol: 'MGLU3', name: 'Magazine Luiza', change: -3.2, value: 8.45, marketCap: 50000000000, category: 'varejo' },
            { symbol: 'WEGE3', name: 'WEG', change: 2.1, value: 45.60, marketCap: 100000000000, category: 'tecnologia' },
            { symbol: 'RENT3', name: 'Localiza', change: 0.3, value: 52.30, marketCap: 70000000000, category: 'varejo' },
            { symbol: 'LREN3', name: 'Lojas Renner', change: -1.8, value: 18.70, marketCap: 40000000000, category: 'varejo' },
            { symbol: 'JBSS3', name: 'JBS', change: 1.5, value: 35.20, marketCap: 60000000000, category: 'varejo' }
        ];

        // Adicionar as bolhas ao sistema 3D
        stockData.forEach(stock => {
            bubble3D.addBubble(stock);
        });

        // Exemplo de como filtrar bolhas por categoria (se você usar os botões)
        document.querySelectorAll('.category-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                const category = e.target.dataset.category;
                bubble3D.clearBubbles(); // Limpa as bolhas existentes
                
                const filteredData = category === 'all' 
                    ? stockData 
                    : stockData.filter(stock => stock.category === category);
                
                filteredData.forEach(stock => {
                    bubble3D.addBubble(stock);
                });

                // Atualiza o estado ativo dos botões
                document.querySelectorAll('.category-btn').forEach(b => b.classList.remove('active'));
                e.target.classList.add('active');
            });
        });

        // Exemplo de como atualizar dados de uma bolha (simulando tempo real)
        // setInterval(() => {
        //     const randomStock = stockData[Math.floor(Math.random() * stockData.length)];
        //     const newChange = (Math.random() * 5 - 2.5).toFixed(1); // Variação aleatória entre -2.5 e +2.5
        //     bubble3D.updateBubbleData(randomStock.symbol, { change: parseFloat(newChange) });
        // }, 5000);

    </script>
</body>
</html>
